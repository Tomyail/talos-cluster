apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: prometheus-remote-write
  namespace: observability
spec:
  parentRefs:
    - name: external
      namespace: kube-system
      sectionName: https
  hostnames:
    - "prometheus-dev.${SECRET_DOMAIN}"
  rules:
    - matches:
        - path:
            type: Path
            value: /api/v1/write
      # 建议在 Gateway 层加认证或网络限制，防止未授权写入
      backendRefs:
        - name: prometheus-operated
          port: 9090